/*! iptools-jquery-genericfilter - v0.0.1 - 2015-07-14
* https://github.com/interactive-pioneers/iptools-jquery-genericfilter
* Copyright Â© 2015 Interactive Pioneers GmbH; Licensed GPL */
!function(a){"use strict";function b(b,e){this.$element=a(b),this.settings=a.extend({},d,e),this._defaults=d,this._name=c,this.init()}var c="iptGenericFilter",d={child:null},e='{"0": "please choose a child", "1": "option 1", "2": "option 2", "3": "option 3"}';b.prototype={init:function(){return null===this.settings.child?void this.destroy():(a('*[name="'+this.settings.child+'"]').attr("disabled","disabled"),void this.addEventListeners())},handleChange:function(a){var b=a.data,c=b.$element.attr("name"),d=b.getValue(b);console.log("value "+d),0!==d?b.fetchData(c,d):b.updateChild(null)},updateChild:function(b){var c=a('*[name="'+this.settings.child+'"]'),d=null;console.log("updateChild "+this.settings.child+" length: "+c.length+" data: "+b),c.empty(),null!==b?(a.each(b,function(b,e){d=a('<option value="'+b+'">'+e+"</option>"),c.append(d)}),c.removeAttr("disabled")):c.attr("disabled","disabled"),c.val(0),c.trigger("change")},getValue:function(b){var c=a.trim(b.$element.val());return c=parseInt(c,10)||0},fetchData:function(b,c){var d=a.parseJSON(e);this.updateChild(d,b,c)},addEventListeners:function(){this.$element.on("change."+this.name,null,this,this.handleChange)},destroy:function(){this.$element.off("change."+this._name),this.$element.removeData("plugin_"+c)}},a.fn[c]=function(d){return this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(this,d))})}}(jQuery);